/* jslint node: true */
'use strict';

var mongoose = require('mongoose'),
  faker = require('faker'),
  config = require('./config')(),
  conectionString = 'mongodb://localhost:27017/' + config.db,
  User = require('./mongoose_models/user'),
  users = [],

  NUMBER_OF_USERS = process.argv[2] || 1,
  CARDS = [
    "2938835630",
    "2938833614",
    "2861480206",
    "2935342734",
    "2861565054",
    "2915420382",
    "2915098238",
    "2935183310",
    "2935172062",
    "2938851518",
    "2852733598",
    "2935369742",
    "2915140974",
    "2938637790",
    "2915341678",
    "2915354846",
    "2935311678",
    "2852984958",
    "3098763834",
    "2935204062",
    "2915145470",
    "2938663854",
    "2938637374",
    "288777777",
    "2938665950",
    "4184344557",
    "2861471726",
    "2915187518",
    "2938535310",
    "2938827598",
    "2935198958",
    "2861444254",
    "2861421390",
    "2938532974",
    "3097574253",
    "2750921502",
    "2750887294",
    "2938559918",
    "2861328542",
    "2915366894",
    "2938846014",
    "262262013",
    "2938657934",
    "2938731678",
    "2915232078",
    "444444444",
    "289999999",
    "2915420622",
    "2938757854",
    "2915355518",
    "3098732988",
    "2938831118",
    "2915200190",
    "2915297134",
    "2938721054",
    "2915247534",
    "2935265774",
    "341260221",
    "2915204158",
    "2938669918",
    "2915356670",
    "2915393966",
    "2915399726",
    "2938603582",
    "2938762926",
    "2938756782",
    "2780465917",
    "2915096542",
    "2915082734",
    "2938690014",
    "2915119822",
    "2935314254",
    "2909677406",
    "2915144062",
    "2915259470",
    "2907428222",
    "2915263774",
    "2915119454",
    "2861270606",
    "2909867646",
    "2861564078",
    "2861325614",
    "2915171454",
    "2938610846",
    "2861475998",
    "2861239534",
    "2861545758",
    "2861521806",
    "2861562030",
    "2938590830",
    "2938800014",
    "2861399342",
    "1938961062",
    "2938700926",
    "2938610302",
    "2938837502",
    "2861524542",
    "2935237070",
    "2861540510",
    "2861460078",
    "2861530990",
    "2915343326",
    "2909775390",
    "2915343550"
  ],
  i;

for(i = 0; i < NUMBER_OF_USERS; i+=1) {
  users.push({
    username: faker.internet.userName(),
    password: 'password',
    team: faker.random.array_element(['red', 'green']),
    idEcobici: [faker.random.array_element(CARDS)]
  });
}

mongoose.connect(conectionString, function (err) {
  if (err) { throw err; }
  console.log('Successfully connected to MongoDB at: ' + config.db);

  users.forEach(function (user) {
    var user_ = new User(user);
    user_.save();
  });
});
